# https://github.com/ASC8384/myRime
# mailto:ASC_8384@foxmail.com
# æœ‰å‚è€ƒ
#
# éƒ¨ç½²ä½ç½®ï¼š
# ~/.config/ibus/rime  (Linux)
# ~/Library/Rime  (Mac OS)
# %APPDATA%\Rime  (Windows)
#
# é‡æ–°éƒ¨ç½²å³å¯
#

patch:

  switches:
    - name: ascii_mode
      reset: 1
      states: [ä¸­æ–‡, æ´‹æ–‡]
    - name: full_shape
      reset: 0
      states: [åŠè§’, å…¨è§’]
    - name: zh_simp
      reset: 1
      states: [æ¼¢å­—, æ±‰å­—]
    - name: ascii_punct
      states: [ ã€‚ï¼Œ, ï¼ï¼Œ ]
    - name: emoji_suggestion
      reset: 0
      states: [ "ğŸˆšï¸ï¸\uFE0E", "ğŸˆ¶ï¸ï¸\uFE0F" ]
    - name: symbol_support
      reset: 1
      states: [ "æ— ç¬¦", "â†’ç¬¦" ]
    - name: gb2312 #ç”Ÿåƒ»å­—å¼€å…³
      reset: 0
      states: [ å¢å»£, å¸¸ç”¨ ] # []

  engine/+:
    translators/+:
      - table_translator@custom_phrase # è‡ªå®šä¹‰è¯åº“
    #   - echo_translator # æ²’æœ‰å…¶ä»–å€™é¸å­—æ™‚ï¼Œå›é¡¯è¼¸å…¥ç¢¼ã€”è¼¸å…¥ç¢¼å¯ä»¥Shift+Enterä¸Šå±›ã€•
    filters:
      - charset_filter@gb2312
      - simplifier@emoji_suggestion
      - simplifier@symbol_support
      - simplifier # ç®€ä½“
      - uniquifier # å»é‡

  speller:
    alphabet: zyxwvutsrqponmlkjihgfedcba
    delimiter: " '"
    algebra:
      - erase/^xx$/
      - derive/^([jqxy])u$/$1v/
      - derive/^([aoe])([ioun])$/$1$1$2/
      # æ¨¡ç³ŠéŸ³ï¼Œç®€æ‹¼ä¼šç ´ååŒæ‹¼çš„ç¾æ„Ÿ
      # - abbrev/^([az]).+$/$1/ #ç®€æ‹¼ï¼ˆé¦–å­—æ¯ï¼‰
      # - abbrev/^([zcs]h).+$/$1/ #ç®€æ‹¼ï¼ˆzh, ch, shï¼‰
      - derive/^([zcs])h/$1/ # zh, ch, sh => z, c, s
      - derive/^([zcs])([^h])/$1h$2/ # z, c, s => zh, ch, sh
      - derive/([aei])n$/$1ng/ # en => eng, in => ing
      - derive/([aei])ng$/$1n/ # eng => en, ing => in
      # - derive/([iu])an$/$lang/ # ian => iang, uan => uang
      # - derive/([iu])ang$/$lan/ # iang => ian, uang => uan
      - xform/^([aoe])(ng)?$/$1$1$2/
      - xform/iu$/Q/
      - xform/(.)ei$/$1W/
      - xform/uan$/R/
      - xform/[uv]e$/T/
      - xform/un$/Y/
      - xform/^sh/U/
      - xform/^ch/I/
      - xform/^zh/V/
      - xform/uo$/O/
      - xform/ie$/P/
      - xform/i?ong$/S/
      - xform/ing$|uai$/K/
      - xform/(.)ai$/$1D/
      - xform/(.)en$/$1F/
      - xform/(.)eng$/$1G/
      - xform/[iu]ang$/L/
      - xform/(.)ang$/$1H/
      - xform/ian$/M/
      - xform/(.)an$/$1J/
      - xform/(.)ou$/$1Z/
      - xform/[iu]a$/X/
      - xform/iao$/N/
      - xform/(.)ao$/$1C/
      - xform/ui$/V/
      - xform/in$/B/
      - xlit/QWRTYUIOPSDFGHJKLZXCVBNM/qwrtyuiopsdfghjklzxcvbnm/
      #- abbrev/^(.).+$/$1/

  # "recognizer/patterns/punct": "^/([a-z]+|[0-9])$" # / é”®
  "recognizer/patterns/punct": "^\\\\([A-Z|a-z]*|[0-9]|10)$" # \ é”®
  # "recognizer/patterns/punct": "^i([A-Z|a-z]*|[0-9]|10)$" # i é”®

  # ä¸»ç¿»è¯‘å™¨
  translator/dictionary: luna_pinyin.extended # è¼‰å…¥æœ™æœˆæ‹¼éŸ³æ“´å……è©åº«
  translator/initial_quality: 1 # ä¸»ç¿»è¯‘å™¨çš„ä¼˜å…ˆçº§è®¾ä¸º1
  translator/enable_completion: true # å¼€å¯é€éµæç¤º
  translator/preedit_format: {} # è¾“å…¥åŒæ‹¼ç çš„æ—¶å€™ä¸è½¬åŒ–ä¸ºå…¨æ‹¼ç 

  punctuator:
    import_preset: mysymbols # mysymbols
    half_shape:
      "`": "Â·"
      "~": "ï½"
      "!": "ï¼"
      "@": "@"
      "#": "#"
      "$": "ï¿¥"
      "%": "%"
      "^": "â€¦â€¦"
      "&": "&"
      "*": "Ã—"
      "(": "ï¼ˆ"
      ")": "ï¼‰"
      "_": "â€”â€”"
      "+": "+"
      "-": "-"
      "=": "="
      "[": "ã€"
      "]": "ã€‘"
      "{": "ï½›"
      "}": "ï½"
      "|": "ï½œ"
      "\\": "ã€"
      "/": "ã€"
      ";": "ï¼›"
      "'": "â€™"
      ",": "ï¼Œ"
      ".": "ã€‚"
      "<": "ã€Š"
      ">": "ã€‹"
      "?": "ï¼Ÿ"

  # åˆ†å·ä¸Šå±äºŒå€™é€‰è¯ï¼›å¼•å·ä¸Šå±ä¸‰å€™é€‰è¯
  "key_binder/bindings":
    - { when: has_menu, accept: semicolon, send: 2 }
    - { when: has_menu, accept: apostrophe, send: 3 }
    - { when: paging, accept: bracketleft, send: Page_Up }
    - { when: has_menu, accept: bracketright, send: Page_Down }

  custom_phrase:
    dictionary: ""
    user_dict: custom_phrase
    db_class: stabledb
    enable_completion: false
    enable_sentence: false
    initial_quality: 1

  simplifier:
    option_name: zh_simp
    # tags: [ abc ] # abc å°æ‡‰abc_segmentor

  # https://github.com/rime/rime-emoji/blob/master/emoji_suggestion.yaml
  emoji_suggestion:
    opencc_config: emoji.json
    option_name: emoji_suggestion
    tips: all

  # https://github.com/fkxxyz/rime-symbols
  symbol_support:
    opencc_config: symbol.json
    option_name: symbol_support
    tips: all

  reverse_lookup/+: # ç¬”ç”»è¾“å…¥æ³•åæŸ¥
    tips: ã€”ç­†ç•«â†”hspnz/ä¸€ä¸¨ä¸¿ä¸¶ä¹™ã€•